<div class="row d-flex flex-column justify-content-center align-items-center">
    <div class="col-xl-12 d-flex flex-column justify-content-center align-items-center">
        <div class="pt-5 text-center">
            <h4>Assistant agency for mega projects</h4>
            <h3>{{projectDetails?.name || '--'}}</h3>
        </div>
        <div class="pt-5 text-center">
            <h2>Visit the contract project website No ({{projectDetails?.contractNo || '--'}})</h2>
        </div>
        <div class="pt-5 text-center">
            <h2>
                Project : {{projectDetails?.name || '--'}}
            </h2>
            <h2>Consultant: {{projectDetails?.consultantName || '--'}}</h2>
            <h2>Contractor : {{projectDetails?.contractorName || '--'}}</h2>
        </div>
        <div class="pt-5 text-center">
            <a (click)="changeDocumentNo()" class="btn btn-light-primary d-flex">
                Document No: {{visitDetails?.documentNo || '--'}}
            </a>
        </div>
    </div>
</div>

<div class="document-container">
    <!-- Table of Contents -->
    <h2>Table of Contents:</h2>
    <ul class="toc">
        <li *ngFor="let item of visitIndices" class="d-flex justify-content-between">
            <span class="red">{{item?.number}} {{item?.name || '--'}}</span>
            <span style="border-top: 2px dashed #000; flex: 0.98; margin-top: 10px;">&nbsp;</span>
        </li>
    </ul>
  
    <!-- Document Data -->
    <h3>Document data:</h3>
    <table class="document-table">
      <thead>
        <tr>
          <th>Review</th>
          <th>Condition Review</th>
          <th>Date</th>
          <th>The Side</th>
          <th>Prepare the report</th>
          <th>Review the quality of the report</th>
          <th>Review</th>
          <th>Project Manager</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>000</td>
          <td>الإستخدام</td>
          <td>2024-10-08</td>
          <td>Aji</td>
          <td>Admin</td>
          <td><img src="signature.png" alt="Signature"></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>شيبس</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>التوقيع</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  
    <!-- Visit Data -->
    <h3>1. Visit data:</h3>
    <table class="visit-table">
      <thead>
        <tr>
          <th colspan="2">Statement</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Project Name</td>
          <td>: Execution of King Abdullah International Gardens - Phase III</td>
        </tr>
        <tr>
          <td>Date of visit</td>
          <td>14-01-2025</td>
        </tr>
        <tr>
          <td>Those concerned with attendance</td>
          <td>Project Management Office - Supervising Consultant - Contractor - Subcontractor</td>
        </tr>
      </tbody>
    </table>
    
    <div class="pt-3 d-flex">
        <a (click)="openAttendance()" class="btn btn-sm btn-dark d-flex">
            Add Attendance
        </a>
    </div>
    <table class="visit-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>The Side</th>
          <th>Job</th>
          <th>Email</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>  


<ng-template #documentModal let-modal>
    <form [formGroup]="changeDocumentForm" (ngSubmit)="onChangeDocumentNo()">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Document Number</h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body">
            <div class="row mb-6">
                <div class="col-lg-12 fv-row">
                    <div class="col-lg-12 fv-row">
                        <input type="text" class="form-control form-control-lg form-control-solid text-start" name="documentNo"
                          formControlName="documentNo" />
                        <div
                          *ngIf="changeDocumentForm?.get('documentNo')?.invalid && (changeDocumentForm?.get('documentNo')?.dirty || changeDocumentForm?.get('documentNo')?.touched)"
                          class="fv-plugins-message-container">
                          <div class="fv-help-block">Number is required</div>
                        </div>
                      </div>
                </div>

            </div>
        </div>
        <div class="modal-footer flex-center">
            <!--begin::Button-->
            <button type="reset" id="kt_modal_update_customer_cancel" class="btn btn-light me-3"
                (click)="modal.dismiss('cancel')">
                Discard
            </button>
            <!--end::Button-->

            <!--begin::Button-->
            <button type="submit" id="kt_modal_update_customer_submit" class="btn btn-primary" [disabled]="!changeDocumentForm.valid"
                [attr.data-kt-indicator]="isLoading ? 'on' : 'off'">
                <span class="indicator-label">
                    Submit
                </span>
                <span class="indicator-progress">
                    Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
            <!--end::Button-->
        </div>
    </form>
</ng-template>

<ng-template #attendanceModal let-modal>
    <form [formGroup]="attendanceForm" (ngSubmit)="onAddAttendance()">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Document Number</h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body">
            <div class="row mb-6">
                <div class="col-lg-12 fv-row">
                    <label class="col-lg-4 col-form-label fw-bold fs-6">Name</label>
                    <div class="col-lg-12 fv-row">
                        <input type="text" class="form-control form-control-lg form-control-solid text-start" name="name"
                          formControlName="name" />
                        <div
                          *ngIf="attendanceForm?.get('name')?.invalid && (attendanceForm?.get('name')?.dirty || attendanceForm?.get('name')?.touched)"
                          class="fv-plugins-message-container">
                          <div class="fv-help-block">Name is required</div>
                        </div>
                      </div>
                </div>
                <div class="col-lg-12 fv-row">
                    <label class="col-lg-4 col-form-label fw-bold fs-6">The Side</label>
                    <div class="col-lg-12 fv-row">
                        <input type="text" class="form-control form-control-lg form-control-solid text-start" name="side"
                          formControlName="side" />
                        <div
                          *ngIf="attendanceForm?.get('side')?.invalid && (attendanceForm?.get('side')?.dirty || attendanceForm?.get('side')?.touched)"
                          class="fv-plugins-message-container">
                          <div class="fv-help-block">side is required</div>
                        </div>
                      </div>
                </div>
                <div class="col-lg-12 fv-row">
                    <label class="col-lg-4 col-form-label fw-bold fs-6">Job</label>
                    <div class="col-lg-12 fv-row">
                        <input type="text" class="form-control form-control-lg form-control-solid text-start" name="job"
                          formControlName="job" />
                        <div
                          *ngIf="attendanceForm?.get('job')?.invalid && (attendanceForm?.get('job')?.dirty || attendanceForm?.get('job')?.touched)"
                          class="fv-plugins-message-container">
                          <div class="fv-help-block">job is required</div>
                        </div>
                      </div>
                </div>
                <div class="col-lg-12 fv-row">
                    <label class="col-lg-4 col-form-label fw-bold fs-6">Email</label>
                    <div class="col-lg-12 fv-row">
                        <input type="text" class="form-control form-control-lg form-control-solid text-start" name="email"
                          formControlName="email" />
                        <div
                          *ngIf="attendanceForm?.get('email')?.invalid && (attendanceForm?.get('email')?.dirty || attendanceForm?.get('email')?.touched)"
                          class="fv-plugins-message-container">
                          <div class="fv-help-block">email is required</div>
                        </div>
                      </div>
                </div>

            </div>
        </div>
        <div class="modal-footer flex-center">
            <!--begin::Button-->
            <button type="reset" id="kt_modal_update_customer_cancel" class="btn btn-light me-3"
                (click)="modal.dismiss('cancel')">
                Discard
            </button>
            <!--end::Button-->

            <!--begin::Button-->
            <button type="submit" id="kt_modal_update_customer_submit" class="btn btn-primary"
                [attr.data-kt-indicator]="isLoading ? 'on' : 'off'">
                <span class="indicator-label">
                    Submit
                </span>
                <span class="indicator-progress">
                    Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
            <!--end::Button-->
        </div>
    </form>
</ng-template>